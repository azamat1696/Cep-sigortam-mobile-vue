import{_ as k,C as U,r as c,c as V,E as B,D as b,bm as E,w as I,b7 as Q,au as D,bu as h,bv as $,n as u,aO as g,f as i,q as f,x as P,Q as _,s as d,v as R,I as A,F as z,be as K,u as w,p as N,bn as L,z as O,A as j}from"./index.30f5c437.js";import{Q as T}from"./QForm.a1289c72.js";const M=U({name:"RenewPassword",emits:["update:modelValue"],setup(){const e=c(4),t=c([]),o=c([]),n=V(()=>{const s=o.value.filter(l=>l);return e.value!==s.length?"":s.join("")}),{user:v,permenantUser:y}=B(b()),r=E(),{verifySmsCode:a,getUserInfo:x,resendSmsCode:q}=b();I(n,()=>{n.value});const F=(s,l)=>{s&&(t.value[l]=s)},m=s=>{console.log(s),s>=0&&(s<e.value?t==null||t.value[s].select():n.value&&t.value[s-1].blur())},C=(s,l)=>{s&&m(+l+1)};Q(()=>{t.value=[]});const S=(s,l)=>{const p=s.key;["Tab","Shift","Meta","Control","Alt"].includes(p)||["Delete"].includes(p)||(p==="ArrowLeft"||p==="Backspace"?m(l-1):p==="ArrowRight"&&m(l+1))};return{test:c(!1),formFields:D({}),fieldValues:o,length:e,onKeyUp:S,onUpdate:C,updateFieldRef:F,router:r,verifySmsCode:a,resendSmsCode:q,getUserInfo:x,user:v,permenantUser:y}},methods:{onSubmit(){var t,o;let e=new FormData;e.append("smsCode",this.fieldValues.join("")),e.append("id_card",(t=this.permenantUser)==null?void 0:t.id_card),e.append("phone",this.permenantUser.phone),e.append("password",(o=this.permenantUser)==null?void 0:o.password),this.verifySmsCode(e).then(n=>{n===!0&&this.router.push({name:"homeLogin"})}).catch(n=>{console.log(n)})},onForgotPassword(){var t;let e=new FormData;e.append("phone",(t=this.permenantUser)==null?void 0:t.phone),this.resendSmsCode(e).then(o=>{if(o===!0){h.create({message:"\u015Eifre yenileme kodu g\xF6nderildi",color:"positive",position:"top",timeout:2e3});return}h.create({message:"\u015Eifre yenileme kodu g\xF6nderilemedi kod s\xFCresi ge\xE7memi\u015Ftir",color:"negative",position:"top",timeout:2e3})}).catch(o=>{$.hide(),h.create({message:"\u015Eifre s\xFCresi daha ge\xE7medi.",color:"negative",type:"negative",position:"top",timeout:2e3}),console.log(o)})}}}),G=e=>(O("data-v-149381e8"),e=e(),j(),e),H={class:"fullscreen flex flex-center no-padding"},J={class:"text-center"},W={class:"text-subtitle1 q-pb-lg q-pl-md q-pr-md text-center",style:{color:"#5e5e5e"}},X={class:"flex flex-center q-pb-xl q-pt-lg q-pa-lg"},Y={class:"q-pa-sm"},Z={class:"q-pt-md"},ee={class:"row q-pt-md"},se=G(()=>d("div",{class:"col-6"},null,-1)),te={class:"col-6"};function oe(e,t,o,n,v,y){return u(),g("div",H,[i(P,{class:"no-shadow transparent",style:{height:"auto","min-width":"370px","margin-top":"130px"}},{default:f(()=>[i(_,{class:"q-pb-xs"},{default:f(()=>[d("div",J,[i(R,{name:"lock",class:"bg-primary q-pa-lg",color:"white",size:"lg",style:{"border-radius":"50%"}})])]),_:1}),i(_,{class:"q-pt-xs"},{default:f(()=>[i(T,{class:"q-pt-md q-pb-md",onSubmit:e.onSubmit},{default:f(()=>[d("div",W,A(e.$t("enter_4_digit_code")),1),d("div",X,[(u(!0),g(z,null,K(e.length,r=>(u(),g("div",Y,[(u(),N(L,{modelValue:e.fieldValues[r-1],"onUpdate:modelValue":[a=>e.fieldValues[r-1]=a,a=>e.onUpdate(a,r-1)],outlined:"",color:"#EBEBEB",type:"password",onKeyup:a=>e.onKeyUp(a,r-1),key:r,ref_for:!0,ref:a=>e.updateFieldRef(a,r-1),"input-class":"text-center text-primary text-h4 q-pa-none ",style:{width:"6ch"},maxlength:"1",dense:""},null,8,["modelValue","onUpdate:modelValue","onKeyup"]))]))),256))]),d("div",Z,[i(w,{color:"primary","text-color":"white",label:e.$t("verify"),"no-caps":"",class:"full-width",style:{"border-radius":"8px"},size:"20px",type:"submit"},null,8,["label"])]),d("div",ee,[se,d("div",te,[i(w,{color:"primary","text-color":"grey-8",label:e.$t("re_send_code"),"no-caps":"",dense:"",flat:"",class:"full-width",padding:"none",align:"right",size:"18px",onClick:e.onForgotPassword},null,8,["label","onClick"])])])]),_:1},8,["onSubmit"])]),_:1}),i(_,{class:"q-pt-xl"})]),_:1})])}var re=k(M,[["render",oe],["__scopeId","data-v-149381e8"]]);export{re as default};
