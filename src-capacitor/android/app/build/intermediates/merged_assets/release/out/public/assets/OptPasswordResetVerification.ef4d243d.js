import{_ as k,C,r as c,c as B,D as E,E as R,bl as I,o as Q,w as D,b6 as $,au as P,bt as g,bu as A,n as u,aN as _,f as l,q as f,x as N,Q as v,s as i,v as z,I as K,F as j,bd as L,u as w,p as T,bm as M,z as O,A as G}from"./index.514420a3.js";import{Q as H}from"./QForm.aa023094.js";const J=C({name:"RenewPassword",emits:["update:modelValue"],setup(){const e=c(4),s=c([]),r=c([]),p=B(()=>{const t=r.value.filter(n=>n);return e.value!==t.length?"":t.join("")}),m=E(),{user:y,permenantUser:a,authToken:o}=R(m),{passwordResetSms:x,getUserInfo:q,resendSmsCode:S}=m,b=I();Q(()=>{o.value&&b.push({name:"homeLogin"})}),D(p,()=>{p.value});const F=(t,n)=>{t&&(s.value[n]=t)},h=t=>{console.log(t),t>=0&&(t<e.value?s==null||s.value[t].select():p.value&&s.value[t-1].blur())},V=(t,n)=>{t&&h(+n+1)};$(()=>{s.value=[]});const U=(t,n)=>{const d=t.key;["Tab","Shift","Meta","Control","Alt"].includes(d)||["Delete"].includes(d)||(d==="ArrowLeft"||d==="Backspace"?h(n-1):d==="ArrowRight"&&h(n+1))};return{test:c(!1),formFields:P({}),fieldValues:r,length:e,onKeyUp:U,onUpdate:V,updateFieldRef:F,router:b,passwordResetSms:x,resendSmsCode:S,getUserInfo:q,user:y,permenantUser:a}},methods:{onSubmit(){var s;let e=new FormData;e.append("smsCode",this.fieldValues.join("")),this.permenantUser.smsCode=this.fieldValues.join(""),e.append("id_card",(s=this.permenantUser)==null?void 0:s.id_card),e.append("phone",this.permenantUser.phone),this.passwordResetSms(e)},onForgotPassword(){var s;let e=new FormData;e.append("phone",(s=this.permenantUser)==null?void 0:s.phone),this.resendSmsCode(e).then(r=>{if(r===!0){g.create({message:"\u015Eifre yenileme kodu g\xF6nderildi",color:"positive",position:"top",timeout:2e3});return}g.create({message:"\u015Eifre yenileme kodu g\xF6nderilemedi kod s\xFCresi ge\xE7memi\u015Ftir",color:"negative",position:"top",timeout:2e3})}).catch(r=>{A.hide(),g.create({message:"\u015Eifre s\xFCresi daha ge\xE7medi.",color:"negative",type:"negative",position:"top",timeout:2e3}),console.log(r)})}}}),W=e=>(O("data-v-f8e6f23e"),e=e(),G(),e),X={class:"full-width flex flex-center no-padding"},Y={class:"text-center"},Z={class:"text-subtitle1 q-pb-lg q-pl-md q-pr-md text-center",style:{color:"#5e5e5e"}},ee={class:"flex flex-center q-pb-xl q-pt-lg q-pa-lg"},te={class:"q-pa-sm"},se={class:"q-pt-md"},oe={class:"row q-pt-md"},ae=W(()=>i("div",{class:"col-6"},null,-1)),ne={class:"col-6"};function le(e,s,r,p,m,y){return u(),_("div",X,[l(N,{class:"no-shadow transparent",style:{height:"auto","min-width":"370px","margin-top":"130px"}},{default:f(()=>[l(v,{class:"q-pb-xs"},{default:f(()=>[i("div",Y,[l(z,{name:"lock",class:"bg-primary q-pa-lg",color:"white",size:"lg",style:{"border-radius":"50%"}})])]),_:1}),l(v,{class:"q-pt-xs"},{default:f(()=>[l(H,{class:"q-pt-md q-pb-md",onSubmit:e.onSubmit},{default:f(()=>[i("div",Z,K(e.$t("enter_4_digit_code")),1),i("div",ee,[(u(!0),_(j,null,L(e.length,a=>(u(),_("div",te,[(u(),T(M,{modelValue:e.fieldValues[a-1],"onUpdate:modelValue":[o=>e.fieldValues[a-1]=o,o=>e.onUpdate(o,a-1)],outlined:"",color:"#EBEBEB",type:"password",onKeyup:o=>e.onKeyUp(o,a-1),key:a,ref_for:!0,ref:o=>e.updateFieldRef(o,a-1),"input-class":"text-center text-primary text-h4 q-pa-none ",style:{width:"6ch"},maxlength:"1",dense:""},null,8,["modelValue","onUpdate:modelValue","onKeyup"]))]))),256))]),i("div",se,[l(w,{color:"primary","text-color":"white",label:e.$t("verification_code_get"),"no-caps":"",class:"full-width",style:{"border-radius":"8px"},size:"20px",type:"submit"},null,8,["label"])]),i("div",oe,[ae,i("div",ne,[l(w,{color:"primary","text-color":"grey-8",label:e.$t("login"),"no-caps":"",dense:"",flat:"",class:"full-width",padding:"none",align:"right",size:"18px",to:{name:"loginPage"}},null,8,["label"])])])]),_:1},8,["onSubmit"])]),_:1}),l(v,{class:"q-pt-xl"})]),_:1})])}var de=k(J,[["render",le],["__scopeId","data-v-f8e6f23e"]]);export{de as default};
